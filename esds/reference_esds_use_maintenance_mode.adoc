---
permalink: esds/reference_esds_use_maintenance_mode.html 
sidebar: sidebar 
keywords: element, solidfire esds, maintenance, maintenance mode 
summary: 如果您需要將儲存節點離線以進行軟體升級或主機修復等維護作業、您可以啟用該節點的維護模式、將I/O對儲存叢集其餘部分的影響降至最低。 
---
= 在不支援的ESDS叢集上使用維護模式SolidFire
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果您需要將儲存節點離線以進行軟體升級或主機修復等維護作業、您可以啟用該節點的維護模式、將I/O對儲存叢集其餘部分的影響降至最低。


TIP: 如果您要驗證節點上的維護模式目前狀態、請使用 link:../api/reference_element_api_listactivenodes.html[""listActive節點""^] API方法。節點物件包含「maintenanceMode」參數、可指出節點上維護模式的目前狀態。


NOTE: 請務必在啟用維護模式後立即進行維護。切勿讓節點處於維護模式、而非必要。

只有當節點狀況良好（沒有任何封鎖叢集故障）、而且儲存叢集能夠承受單一節點故障時、您才能將儲存節點轉換為維護模式。在您為健全且容錯的節點啟用維護模式之後、該節點不會立即轉換、除非符合下列條件、否則會加以監控：

* 節點上裝載的所有磁碟區都已容錯移轉、而且節點不再是任何磁碟區的主磁碟區。
* 每個容錯移轉的磁碟區都會指派一個暫用待命節點。


符合這些條件之後、節點便會轉換成維護模式。如果在五分鐘內未符合這些條件、節點將不會進入維護模式。

停用儲存節點的維護模式時、會監控節點、直到符合下列條件為止：

* 所有資料都會完全複寫到節點。
* 所有封鎖的叢集故障都已解決。
* 節點上裝載之磁碟區的所有暫用待命節點指派都已停用。


在符合這些條件之後、節點就會移出維護模式。如果在一小時內不符合這些條件、節點將無法從維護模式移轉。



== 使用維護模式時可能發生的情況

* 如果某個節點處於維護模式、但尚未重新開機、且/或尚未進行維護、或發生維護、且已備份且正常運作、但您尚未停用維護模式、 另一個節點當機時、第一個節點的維護模式將會自動停用。
* 如果其中一個節點處於維護模式、而另一個節點同時當機、則會發生中斷。您必須等到處於維護模式的節點重新上線。
* 如果您長期將屬於某個頻道群成員的節點置於維護模式中、系統會自動將其從頻道群中移除、如果有其他節點可供新增到該節點的位置。




== 啟用維護模式

您可以使用「啟用維護模式」API方法來啟用維護模式。此方法具有下列輸入參數：

[cols="5*"]
|===
| 名稱 | 說明 | 類型 | 預設值 | 必要 


 a| 
「forceWithUnresolvedFaults」
 a| 
即使存在封鎖叢集故障、仍會強制啟用此節點的維護模式。
 a| 
布林值
 a| 
錯
 a| 
否



 a| 
節點
 a| 
要置於維護模式的節點ID清單。一次只支援一個節點。
 a| 
整數陣列
 a| 
無
 a| 
是的



 a| 
《PerMinutePrimarySwapLimit》（《PerMinutePrimarySwapLimit》）
 a| 
每分鐘交換的主要切片數。如果未指定、則會一次交換所有主要切片。
 a| 
整數
 a| 
無
 a| 
否



 a| 
超時
 a| 
指定在自動停用維護模式之前、應保持啟用的時間長度。格式化為時間字串（例如、hh：mm：sss）。如果未指定、維護模式將維持啟用、直到明確停用為止。
 a| 
字串
 a| 
無
 a| 
否

|===
此方法具有下列傳回值：

[cols="3*"]
|===
| 名稱 | 說明 | 類型 


 a| 
「asyncdle」
 a| 
您可以使用「Getynprynresult」方法擷取此非同步處理、並判斷維護模式轉換何時完成。
 a| 
整數



 a| 
目前模式
 a| 
節點目前的維護模式狀態。可能值：

* 停用：未要求維護。
* 容錯移轉：節點無法從維護模式中恢復。
* RecoveringFromMaintenance：節點正在從維護模式中恢復。
* 準備維護：正在採取行動、準備節點執行維護作業。
* ReadyForMaintenance：節點已準備好進行維護。

 a| 
維護模式（字串）



 a| 
"REquestedMode"
 a| 
節點要求的維護模式狀態。可能值：

* 停用：未要求維護。
* 容錯移轉：節點無法從維護模式中恢復。
* RecoveringFromMaintenance：節點正在從維護模式中恢復。
* 準備維護：正在採取行動、準備節點執行維護作業。
* ReadyForMaintenance：節點已準備好進行維護。

 a| 
維護模式（字串）

|===


== 停用維護模式

您可以使用「停用維護模式」API方法來停用維護模式。此方法具有下列輸入參數：

[cols="5*"]
|===
| 名稱 | 說明 | 類型 | 預設值 | 必要 


 a| 
節點
 a| 
要從維護模式中移出的儲存節點ID清單。
 a| 
整數陣列
 a| 
無
 a| 
是的

|===
此方法具有下列傳回值：

[cols="3*"]
|===
| 名稱 | 說明 | 類型 


 a| 
「asyncdle」
 a| 
您可以使用「Getynprynresult」方法擷取此非同步處理、並判斷維護模式轉換何時完成。
 a| 
整數



 a| 
目前模式
 a| 
節點目前的維護模式狀態。可能值：

* 停用：未要求維護。
* 容錯移轉：節點無法從維護模式中恢復。
* 非預期：節點已被發現離線、但處於「已停用」模式。
* RecoveringFromMaintenance：節點正在從維護模式中恢復。
* 準備維護：正在採取行動、準備節點執行維護作業。
* ReadyForMaintenance：節點已準備好進行維護。

 a| 
維護模式（字串）



 a| 
"REquestedMode"
 a| 
節點要求的維護模式狀態。可能值：

* 停用：未要求維護。
* 容錯移轉：節點無法從維護模式中恢復。
* 非預期：節點已被發現離線、但處於「已停用」模式。
* RecoveringFromMaintenance：節點正在從維護模式中恢復。
* 準備維護：正在採取行動、準備節點執行維護作業。
* ReadyForMaintenance：節點已準備好進行維護。

 a| 
維護模式（字串）

|===


== 如需詳細資訊、請參閱

* https://www.netapp.com/data-storage/solidfire/documentation/["NetApp SolidFire 資源頁面"^]
* https://docs.netapp.com/sfe-122/topic/com.netapp.ndc.sfe-vers/GUID-B1944B0E-B335-4E0B-B9F1-E960BF32AE56.html["先前版本的NetApp SolidFire 產品及元素產品文件"^]

